<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_22) on Mon Dec 20 20:40:32 CET 2010 -->
<TITLE>
TimelineReader (Mary Java API)
</TITLE>

<META NAME="date" CONTENT="2010-12-20">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="TimelineReader (Mary Java API)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/TimelineReader.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../marytts/unitselection/data/SyllableIterator.html" title="class in marytts.unitselection.data"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../marytts/unitselection/data/TimelineReader.IdxField.html" title="class in marytts.unitselection.data"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?marytts/unitselection/data/TimelineReader.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="TimelineReader.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
marytts.unitselection.data</FONT>
<BR>
Class TimelineReader</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../resources/inherit.gif" ALT="extended by "><B>marytts.unitselection.data.TimelineReader</B>
</PRE>
<DL>
<DT><B>Direct Known Subclasses:</B> <DD><A HREF="../../../marytts/unitselection/data/HnmTimelineReader.html" title="class in marytts.unitselection.data">HnmTimelineReader</A>, <A HREF="../../../marytts/unitselection/data/LPCTimelineReader.html" title="class in marytts.unitselection.data">LPCTimelineReader</A>, <A HREF="../../../marytts/unitselection/data/MCepTimelineReader.html" title="class in marytts.unitselection.data">MCepTimelineReader</A>, <A HREF="../../../marytts/tests/junit4/util/TestableTimelineReader.html" title="class in marytts.tests.junit4.util">TestableTimelineReader</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public class <B>TimelineReader</B><DT>extends java.lang.Object</DL>
</PRE>

<P>
The TimelineReader class provides an interface to read regularly or variably spaced
 datagrams from a Timeline data file in Mary format.
<P>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>sacha, marc</DD>
</DL>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->

<A NAME="nested_class_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Nested Class Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../marytts/unitselection/data/TimelineReader.IdxField.html" title="class in marytts.unitselection.data">TimelineReader.IdxField</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Simple helper class to read the index fields in a timeline.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../marytts/unitselection/data/TimelineReader.Index.html" title="class in marytts.unitselection.data">TimelineReader.Index</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Simple helper class to read the index part of a timeline file.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../marytts/unitselection/data/TimelineReader.ProcHeader.html" title="class in marytts.unitselection.data">TimelineReader.ProcHeader</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Simple helper class to load the processing header.</TD>
</TR>
</TABLE>
&nbsp;<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../marytts/unitselection/data/TimelineReader.html#datagramsBytePos">datagramsBytePos</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../marytts/unitselection/data/TimelineReader.Index.html" title="class in marytts.unitselection.data">TimelineReader.Index</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../marytts/unitselection/data/TimelineReader.html#idx">idx</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../marytts/util/data/MaryHeader.html" title="class in marytts.util.data">MaryHeader</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../marytts/unitselection/data/TimelineReader.html#maryHdr">maryHdr</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../marytts/unitselection/data/TimelineReader.html#numDatagrams">numDatagrams</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../marytts/unitselection/data/TimelineReader.ProcHeader.html" title="class in marytts.unitselection.data">TimelineReader.ProcHeader</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../marytts/unitselection/data/TimelineReader.html#procHdr">procHdr</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../marytts/unitselection/data/TimelineReader.html#sampleRate">sampleRate</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../marytts/unitselection/data/TimelineReader.html#timeIdxBytePos">timeIdxBytePos</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../marytts/unitselection/data/TimelineReader.html#totalDuration">totalDuration</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The total duration of the timeline data, in samples.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected </CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../marytts/unitselection/data/TimelineReader.html#TimelineReader()">TimelineReader</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Only subclasses can instantiate a TimelineReader object that doesn't call <A HREF="../../../marytts/unitselection/data/TimelineReader.html#load(java.lang.String)"><CODE>load(String)</CODE></A>.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../marytts/unitselection/data/TimelineReader.html#TimelineReader(java.lang.String)">TimelineReader</A></B>(java.lang.String&nbsp;fileName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Construct a timeline from the given file name.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../marytts/unitselection/data/TimelineReader.html#TimelineReader(java.lang.String, boolean)">TimelineReader</A></B>(java.lang.String&nbsp;fileName,
               boolean&nbsp;tryMemoryMapping)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Construct a timeline from the given file name.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../marytts/unitselection/data/TimelineReader.html#computeTotalDuration()">computeTotalDuration</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Compute the total duration of a timeline.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../marytts/util/Pair.html" title="class in marytts.util">Pair</A>&lt;java.nio.ByteBuffer,java.lang.Long&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../marytts/unitselection/data/TimelineReader.html#getByteBufferAtTime(long)">getByteBufferAtTime</A></B>(long&nbsp;targetTimeInSamples)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method produces a new byte buffer whose current position
 represents the requested positionInFile.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../marytts/unitselection/data/Datagram.html" title="class in marytts.unitselection.data">Datagram</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../marytts/unitselection/data/TimelineReader.html#getDatagram(long)">getDatagram</A></B>(long&nbsp;targetTimeInSamples)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get a single datagram from a particular time location,
 given in the timeline's sampling rate.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../marytts/unitselection/data/Datagram.html" title="class in marytts.unitselection.data">Datagram</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../marytts/unitselection/data/TimelineReader.html#getDatagram(long, int)">getDatagram</A></B>(long&nbsp;targetTimeInSamples,
            int&nbsp;reqSampleRate)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get a single datagram from a particular time location.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../marytts/unitselection/data/Datagram.html" title="class in marytts.unitselection.data">Datagram</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../marytts/unitselection/data/TimelineReader.html#getDatagrams(long, int, int, long[])">getDatagrams</A></B>(long&nbsp;targetTimeInSamples,
             int&nbsp;number,
             int&nbsp;reqSampleRate,
             long[]&nbsp;returnOffset)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get a given number of datagrams from a particular time location,
 and return the time offset between the time request and the actual location of the first
 returned datagram.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../marytts/unitselection/data/Datagram.html" title="class in marytts.unitselection.data">Datagram</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../marytts/unitselection/data/TimelineReader.html#getDatagrams(long, long)">getDatagrams</A></B>(long&nbsp;targetTimeInSamples,
             long&nbsp;timeSpanInSamples)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get a given number of datagrams from a particular time location.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../marytts/unitselection/data/Datagram.html" title="class in marytts.unitselection.data">Datagram</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../marytts/unitselection/data/TimelineReader.html#getDatagrams(long, long, int)">getDatagrams</A></B>(long&nbsp;targetTimeInSamples,
             long&nbsp;timeSpanInSamples,
             int&nbsp;reqSampleRate)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get the datagrams spanning a particular time range from a particular time location.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../marytts/unitselection/data/Datagram.html" title="class in marytts.unitselection.data">Datagram</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../marytts/unitselection/data/TimelineReader.html#getDatagrams(long, long, int, long[])">getDatagrams</A></B>(long&nbsp;targetTimeInSamples,
             long&nbsp;timeSpanInSamples,
             int&nbsp;reqSampleRate,
             long[]&nbsp;returnOffset)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get the datagrams spanning a particular time range from a particular time location,
 and return the time offset between the time request and the actual location of the first
 returned datagram.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../marytts/unitselection/data/Datagram.html" title="class in marytts.unitselection.data">Datagram</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../marytts/unitselection/data/TimelineReader.html#getDatagrams(marytts.unitselection.data.Unit, int)">getDatagrams</A></B>(<A HREF="../../../marytts/unitselection/data/Unit.html" title="class in marytts.unitselection.data">Unit</A>&nbsp;unit,
             int&nbsp;reqSampleRate)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get the datagrams spanning a particular unit.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../marytts/unitselection/data/Datagram.html" title="class in marytts.unitselection.data">Datagram</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../marytts/unitselection/data/TimelineReader.html#getDatagrams(marytts.unitselection.data.Unit, int, long[])">getDatagrams</A></B>(<A HREF="../../../marytts/unitselection/data/Unit.html" title="class in marytts.unitselection.data">Unit</A>&nbsp;unit,
             int&nbsp;reqSampleRate,
             long[]&nbsp;returnOffset)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get the datagrams spanning a particular unit,
 and return the time offset between the unit request and the actual location of the first
 returned datagram.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../marytts/unitselection/data/TimelineReader.html#getDatagramsBytePos()">getDatagramsBytePos</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the position of the datagram zone in the original file.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../marytts/unitselection/data/TimelineReader.Index.html" title="class in marytts.unitselection.data">TimelineReader.Index</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../marytts/unitselection/data/TimelineReader.html#getIndex()">getIndex</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The index object.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../marytts/util/Pair.html" title="class in marytts.util">Pair</A>&lt;java.nio.ByteBuffer,java.lang.Long&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../marytts/unitselection/data/TimelineReader.html#getMappedByteBufferAtTime(long)">getMappedByteBufferAtTime</A></B>(long&nbsp;targetTimeInSamples)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../marytts/unitselection/data/Datagram.html" title="class in marytts.unitselection.data">Datagram</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../marytts/unitselection/data/TimelineReader.html#getNextDatagram(java.nio.ByteBuffer)">getNextDatagram</A></B>(java.nio.ByteBuffer&nbsp;bb)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Read and return the upcoming datagram from the given byte buffer.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../marytts/unitselection/data/TimelineReader.html#getNumDatagrams()">getNumDatagrams</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the number of datagrams in the timeline.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../marytts/unitselection/data/TimelineReader.html#getProcHeaderContents()">getProcHeaderContents</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return the content of the processing header as a String.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../marytts/unitselection/data/TimelineReader.html#getSampleRate()">getSampleRate</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the timeline's sample rate.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../marytts/unitselection/data/TimelineReader.html#getTotalDuration()">getTotalDuration</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return the total duration of all data in this timeline.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../marytts/unitselection/data/TimelineReader.html#hopToTime(java.nio.ByteBuffer, long, long)">hopToTime</A></B>(java.nio.ByteBuffer&nbsp;bb,
          long&nbsp;currentTimeInSamples,
          long&nbsp;targetTimeInSamples)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Hop the datagrams in the given byte buffer until the one which begins at or contains the desired time
 (time is in samples; the sample rate is assumed to be that of the timeline).</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../marytts/unitselection/data/TimelineReader.html#load(java.lang.String)">load</A></B>(java.lang.String&nbsp;fileName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Load a timeline from a file.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../marytts/unitselection/data/TimelineReader.html#load(java.lang.String, boolean)">load</A></B>(java.lang.String&nbsp;fileName,
     boolean&nbsp;tryMemoryMapping)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Load a timeline from a file.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../marytts/util/Pair.html" title="class in marytts.util">Pair</A>&lt;java.nio.ByteBuffer,java.lang.Long&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../marytts/unitselection/data/TimelineReader.html#loadByteBufferAtTime(long)">loadByteBufferAtTime</A></B>(long&nbsp;targetTimeInSamples)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../marytts/unitselection/data/TimelineReader.html#scaleTime(int, long)">scaleTime</A></B>(int&nbsp;reqSampleRate,
          long&nbsp;targetTimeInSamples)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Scales a discrete time to the timeline's sample rate.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../marytts/unitselection/data/TimelineReader.html#skipNextDatagram(java.nio.ByteBuffer)">skipNextDatagram</A></B>(java.nio.ByteBuffer&nbsp;bb)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Skip the upcoming datagram at the current position of the byte buffer.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../marytts/unitselection/data/TimelineReader.html#unScaleTime(int, long)">unScaleTime</A></B>(int&nbsp;reqSampleRate,
            long&nbsp;timelineTimeInSamples)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Unscales a discrete time from the timeline's sample rate.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="maryHdr"><!-- --></A><H3>
maryHdr</H3>
<PRE>
protected <A HREF="../../../marytts/util/data/MaryHeader.html" title="class in marytts.util.data">MaryHeader</A> <B>maryHdr</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="procHdr"><!-- --></A><H3>
procHdr</H3>
<PRE>
protected <A HREF="../../../marytts/unitselection/data/TimelineReader.ProcHeader.html" title="class in marytts.unitselection.data">TimelineReader.ProcHeader</A> <B>procHdr</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="idx"><!-- --></A><H3>
idx</H3>
<PRE>
protected <A HREF="../../../marytts/unitselection/data/TimelineReader.Index.html" title="class in marytts.unitselection.data">TimelineReader.Index</A> <B>idx</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="sampleRate"><!-- --></A><H3>
sampleRate</H3>
<PRE>
protected int <B>sampleRate</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="numDatagrams"><!-- --></A><H3>
numDatagrams</H3>
<PRE>
protected long <B>numDatagrams</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="totalDuration"><!-- --></A><H3>
totalDuration</H3>
<PRE>
protected long <B>totalDuration</B></PRE>
<DL>
<DD>The total duration of the timeline data, in samples.
 This is only computed upon request.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="datagramsBytePos"><!-- --></A><H3>
datagramsBytePos</H3>
<PRE>
protected int <B>datagramsBytePos</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="timeIdxBytePos"><!-- --></A><H3>
timeIdxBytePos</H3>
<PRE>
protected int <B>timeIdxBytePos</B></PRE>
<DL>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="TimelineReader(java.lang.String)"><!-- --></A><H3>
TimelineReader</H3>
<PRE>
public <B>TimelineReader</B>(java.lang.String&nbsp;fileName)
               throws <A HREF="../../../marytts/exceptions/MaryConfigurationException.html" title="class in marytts.exceptions">MaryConfigurationException</A></PRE>
<DL>
<DD>Construct a timeline from the given file name.
 
 Aiming for the fundamental guarantee: If an instance of this class is created, it is usable.
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>fileName</CODE> - The file to read the timeline from. 
 Must be non-null and point to a valid timeline file.
<DT><B>Throws:</B>
<DD><CODE>java.lang.NullPointerException</CODE> - if null argument is given
<DD><CODE><A HREF="../../../marytts/exceptions/MaryConfigurationException.html" title="class in marytts.exceptions">MaryConfigurationException</A></CODE> - if no timeline reader can be instantiated from fileName</DL>
</DL>
<HR>

<A NAME="TimelineReader(java.lang.String, boolean)"><!-- --></A><H3>
TimelineReader</H3>
<PRE>
public <B>TimelineReader</B>(java.lang.String&nbsp;fileName,
                      boolean&nbsp;tryMemoryMapping)
               throws <A HREF="../../../marytts/exceptions/MaryConfigurationException.html" title="class in marytts.exceptions">MaryConfigurationException</A></PRE>
<DL>
<DD>Construct a timeline from the given file name.
 
 Aiming for the fundamental guarantee: If an instance of this class is created, it is usable.
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>fileName</CODE> - The file to read the timeline from. 
 Must be non-null and point to a valid timeline file.<DD><CODE>tryMemoryMapping</CODE> - if true, will attempt to read audio data via a memory map, and fall back to piecewise reading.
 If false, will immediately go for piecewise reading using a RandomAccessFile.
<DT><B>Throws:</B>
<DD><CODE>java.lang.NullPointerException</CODE> - if null argument is given
<DD><CODE><A HREF="../../../marytts/exceptions/MaryConfigurationException.html" title="class in marytts.exceptions">MaryConfigurationException</A></CODE> - if no timeline reader can be instantiated from fileName</DL>
</DL>
<HR>

<A NAME="TimelineReader()"><!-- --></A><H3>
TimelineReader</H3>
<PRE>
protected <B>TimelineReader</B>()</PRE>
<DL>
<DD>Only subclasses can instantiate a TimelineReader object that doesn't call <A HREF="../../../marytts/unitselection/data/TimelineReader.html#load(java.lang.String)"><CODE>load(String)</CODE></A>.
 It is their responsibility then to ensure the fundamental guarantee.
<P>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="load(java.lang.String)"><!-- --></A><H3>
load</H3>
<PRE>
protected void <B>load</B>(java.lang.String&nbsp;fileName)
             throws java.io.IOException,
                    java.nio.BufferUnderflowException,
                    <A HREF="../../../marytts/exceptions/MaryConfigurationException.html" title="class in marytts.exceptions">MaryConfigurationException</A>,
                    java.lang.NullPointerException</PRE>
<DL>
<DD>Load a timeline from a file.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>fileName</CODE> - The file to read the timeline from.
 Must be non-null and point to a valid timeline file.
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - if a problem occurs during reading
<DD><CODE>java.nio.BufferUnderflowException</CODE> - if a problem occurs during reading
<DD><CODE><A HREF="../../../marytts/exceptions/MaryConfigurationException.html" title="class in marytts.exceptions">MaryConfigurationException</A></CODE> - if fileName does not point to a valid timeline file
<DD><CODE>java.lang.NullPointerException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="load(java.lang.String, boolean)"><!-- --></A><H3>
load</H3>
<PRE>
protected void <B>load</B>(java.lang.String&nbsp;fileName,
                    boolean&nbsp;tryMemoryMapping)
             throws java.io.IOException,
                    java.nio.BufferUnderflowException,
                    <A HREF="../../../marytts/exceptions/MaryConfigurationException.html" title="class in marytts.exceptions">MaryConfigurationException</A>,
                    java.lang.NullPointerException</PRE>
<DL>
<DD>Load a timeline from a file.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>fileName</CODE> - The file to read the timeline from.
 Must be non-null and point to a valid timeline file.
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - if a problem occurs during reading
<DD><CODE>java.nio.BufferUnderflowException</CODE> - if a problem occurs during reading
<DD><CODE><A HREF="../../../marytts/exceptions/MaryConfigurationException.html" title="class in marytts.exceptions">MaryConfigurationException</A></CODE> - if fileName does not point to a valid timeline file
<DD><CODE>java.lang.NullPointerException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getProcHeaderContents()"><!-- --></A><H3>
getProcHeaderContents</H3>
<PRE>
public java.lang.String <B>getProcHeaderContents</B>()</PRE>
<DL>
<DD>Return the content of the processing header as a String.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>a non-null string representing the proc header.</DL>
</DD>
</DL>
<HR>

<A NAME="getNumDatagrams()"><!-- --></A><H3>
getNumDatagrams</H3>
<PRE>
public long <B>getNumDatagrams</B>()</PRE>
<DL>
<DD>Returns the number of datagrams in the timeline.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the (non-negative) number of datagrams, as a long.</DL>
</DD>
</DL>
<HR>

<A NAME="getDatagramsBytePos()"><!-- --></A><H3>
getDatagramsBytePos</H3>
<PRE>
protected long <B>getDatagramsBytePos</B>()</PRE>
<DL>
<DD>Returns the position of the datagram zone in the original file.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the byte position of the datagram zone.</DL>
</DD>
</DL>
<HR>

<A NAME="getSampleRate()"><!-- --></A><H3>
getSampleRate</H3>
<PRE>
public int <B>getSampleRate</B>()</PRE>
<DL>
<DD>Returns the timeline's sample rate.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the sample rate as a positive integer.</DL>
</DD>
</DL>
<HR>

<A NAME="getTotalDuration()"><!-- --></A><H3>
getTotalDuration</H3>
<PRE>
public long <B>getTotalDuration</B>()
                      throws <A HREF="../../../marytts/exceptions/MaryConfigurationException.html" title="class in marytts.exceptions">MaryConfigurationException</A></PRE>
<DL>
<DD>Return the total duration of all data in this timeline.
 Implementation note: this is an expensive operation that should not be used in production.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>a non-negative long representing the accumulated duration of all datagrams.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../marytts/exceptions/MaryConfigurationException.html" title="class in marytts.exceptions">MaryConfigurationException</A></CODE> - if the duration cannot be obtained.</DL>
</DD>
</DL>
<HR>

<A NAME="computeTotalDuration()"><!-- --></A><H3>
computeTotalDuration</H3>
<PRE>
protected void <B>computeTotalDuration</B>()
                             throws <A HREF="../../../marytts/exceptions/MaryConfigurationException.html" title="class in marytts.exceptions">MaryConfigurationException</A></PRE>
<DL>
<DD>Compute the total duration of a timeline. This is an expensive method, since it goes through
 all datagrams to compute this duration. It should not normally be used in production.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../marytts/exceptions/MaryConfigurationException.html" title="class in marytts.exceptions">MaryConfigurationException</A></CODE> - if the duration could not be computed.</DL>
</DD>
</DL>
<HR>

<A NAME="getIndex()"><!-- --></A><H3>
getIndex</H3>
<PRE>
public <A HREF="../../../marytts/unitselection/data/TimelineReader.Index.html" title="class in marytts.unitselection.data">TimelineReader.Index</A> <B>getIndex</B>()</PRE>
<DL>
<DD>The index object.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the non-null index object.</DL>
</DD>
</DL>
<HR>

<A NAME="scaleTime(int, long)"><!-- --></A><H3>
scaleTime</H3>
<PRE>
protected long <B>scaleTime</B>(int&nbsp;reqSampleRate,
                         long&nbsp;targetTimeInSamples)</PRE>
<DL>
<DD>Scales a discrete time to the timeline's sample rate.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>reqSampleRate</CODE> - the externally given sample rate.<DD><CODE>targetTimeInSamples</CODE> - a discrete time, with respect to the externally given sample rate.
<DT><B>Returns:</B><DD>a discrete time, in samples with respect to the timeline's sample rate.</DL>
</DD>
</DL>
<HR>

<A NAME="unScaleTime(int, long)"><!-- --></A><H3>
unScaleTime</H3>
<PRE>
protected long <B>unScaleTime</B>(int&nbsp;reqSampleRate,
                           long&nbsp;timelineTimeInSamples)</PRE>
<DL>
<DD>Unscales a discrete time from the timeline's sample rate.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>reqSampleRate</CODE> - the externally given sample rate.<DD><CODE>timelineTimeInSamples</CODE> - a discrete time, with respect to the timeline sample rate.
<DT><B>Returns:</B><DD>a discrete time, in samples with respect to the externally given sample rate.</DL>
</DD>
</DL>
<HR>

<A NAME="skipNextDatagram(java.nio.ByteBuffer)"><!-- --></A><H3>
skipNextDatagram</H3>
<PRE>
protected long <B>skipNextDatagram</B>(java.nio.ByteBuffer&nbsp;bb)
                         throws java.io.IOException</PRE>
<DL>
<DD>Skip the upcoming datagram at the current position of the byte buffer.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the duration of the datagram we skipped
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - if we cannot skip another datagram because we have reached the end of the byte buffer</DL>
</DD>
</DL>
<HR>

<A NAME="getNextDatagram(java.nio.ByteBuffer)"><!-- --></A><H3>
getNextDatagram</H3>
<PRE>
protected <A HREF="../../../marytts/unitselection/data/Datagram.html" title="class in marytts.unitselection.data">Datagram</A> <B>getNextDatagram</B>(java.nio.ByteBuffer&nbsp;bb)</PRE>
<DL>
<DD>Read and return the upcoming datagram from the given byte buffer.
 Subclasses should override this method to create subclasses of Datagram.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>bb</CODE> - the timeline byte buffer to read from
<DT><B>Returns:</B><DD>the current datagram, or null if EOF was encountered</DL>
</DD>
</DL>
<HR>

<A NAME="hopToTime(java.nio.ByteBuffer, long, long)"><!-- --></A><H3>
hopToTime</H3>
<PRE>
protected long <B>hopToTime</B>(java.nio.ByteBuffer&nbsp;bb,
                         long&nbsp;currentTimeInSamples,
                         long&nbsp;targetTimeInSamples)
                  throws java.io.IOException,
                         java.lang.IllegalArgumentException</PRE>
<DL>
<DD>Hop the datagrams in the given byte buffer until the one which begins at or contains the desired time
 (time is in samples; the sample rate is assumed to be that of the timeline).
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>bb</CODE> - the timeline byte buffer to use. Must not be null.<DD><CODE>currentTimeInSamples</CODE> - the time position corresponding to the current position of the byte buffer.
 Must not be negative.<DD><CODE>targetTimeInSamples</CODE> - the time location to reach. Must not be less than currentTimeInSamples
<DT><B>Returns:</B><DD>the actual time at which we end up after hopping. This is less than or equal to targetTimeInSamples, never greater than it.
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - if there is a problem skipping the datagrams
<DD><CODE>java.lang.IllegalArgumentException</CODE> - if targetTimeInSamples is less than currentTimeInSamples</DL>
</DD>
</DL>
<HR>

<A NAME="getByteBufferAtTime(long)"><!-- --></A><H3>
getByteBufferAtTime</H3>
<PRE>
protected <A HREF="../../../marytts/util/Pair.html" title="class in marytts.util">Pair</A>&lt;java.nio.ByteBuffer,java.lang.Long&gt; <B>getByteBufferAtTime</B>(long&nbsp;targetTimeInSamples)
                                                                throws java.io.IOException,
                                                                       java.nio.BufferUnderflowException</PRE>
<DL>
<DD>This method produces a new byte buffer whose current position
 represents the requested positionInFile. It cannot be assumed that
 a call to byteBuffer.position() produces any meaningful values. The byte buffer may represent
 only a part of the available data; however, at least one datagram can be read from the byte buffer.
 If no further data can be read from it, a new byte buffer must
 be obtained by calling this method again with a new target time.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>targetTimeInSamples</CODE> - the time position in the file which should be accessed as a byte buffer, in samples.
 Must be non-negative and less than the total duration of the timeline.
<DT><B>Returns:</B><DD>a pair representing the byte buffer from which to read, and the exact time corresponding to the
 current position of the byte buffer. The position as such is not meaningful; 
 the time is guaranteed to be less than or equal to targetTimeInSamples.
<DT><B>Throws:</B>
<DD><CODE>IOException,</CODE> - BufferUnderflowException if no byte buffer can be obtained for the requested time.
<DD><CODE>java.io.IOException</CODE>
<DD><CODE>java.nio.BufferUnderflowException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getMappedByteBufferAtTime(long)"><!-- --></A><H3>
getMappedByteBufferAtTime</H3>
<PRE>
protected <A HREF="../../../marytts/util/Pair.html" title="class in marytts.util">Pair</A>&lt;java.nio.ByteBuffer,java.lang.Long&gt; <B>getMappedByteBufferAtTime</B>(long&nbsp;targetTimeInSamples)
                                                                      throws java.lang.IllegalArgumentException,
                                                                             java.io.IOException</PRE>
<DL>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.lang.IllegalArgumentException</CODE>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="loadByteBufferAtTime(long)"><!-- --></A><H3>
loadByteBufferAtTime</H3>
<PRE>
protected <A HREF="../../../marytts/util/Pair.html" title="class in marytts.util">Pair</A>&lt;java.nio.ByteBuffer,java.lang.Long&gt; <B>loadByteBufferAtTime</B>(long&nbsp;targetTimeInSamples)
                                                                 throws java.io.IOException</PRE>
<DL>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getDatagram(long)"><!-- --></A><H3>
getDatagram</H3>
<PRE>
public <A HREF="../../../marytts/unitselection/data/Datagram.html" title="class in marytts.unitselection.data">Datagram</A> <B>getDatagram</B>(long&nbsp;targetTimeInSamples)
                     throws java.io.IOException</PRE>
<DL>
<DD>Get a single datagram from a particular time location,
 given in the timeline's sampling rate.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>targetTimeInSamples</CODE> - the requested position, in samples. Must be non-negative and
 less than the total duration of the timeline.
<DT><B>Returns:</B><DD>the datagram starting at or overlapping the given time, or null if end-of-file was encountered
<DT><B>Throws:</B>
<DD><CODE>IOException,</CODE> - BufferUnderflowException if no datagram could be created from the data at the given time.
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getDatagram(long, int)"><!-- --></A><H3>
getDatagram</H3>
<PRE>
public <A HREF="../../../marytts/unitselection/data/Datagram.html" title="class in marytts.unitselection.data">Datagram</A> <B>getDatagram</B>(long&nbsp;targetTimeInSamples,
                            int&nbsp;reqSampleRate)
                     throws java.io.IOException</PRE>
<DL>
<DD>Get a single datagram from a particular time location.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>targetTimeInSamples</CODE> - the requested position, in samples. Must be non-negative and
 less than the total duration of the timeline.<DD><CODE>reqSampleRate</CODE> - the sample rate for the requested times.
<DT><B>Returns:</B><DD>the datagram starting at or overlapping the given time, or null if end-of-file was encountered
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - if no datagram could be created from the data at the given time.</DL>
</DD>
</DL>
<HR>

<A NAME="getDatagrams(long, long, int, long[])"><!-- --></A><H3>
getDatagrams</H3>
<PRE>
public <A HREF="../../../marytts/unitselection/data/Datagram.html" title="class in marytts.unitselection.data">Datagram</A>[] <B>getDatagrams</B>(long&nbsp;targetTimeInSamples,
                               long&nbsp;timeSpanInSamples,
                               int&nbsp;reqSampleRate,
                               long[]&nbsp;returnOffset)
                        throws java.io.IOException</PRE>
<DL>
<DD>Get the datagrams spanning a particular time range from a particular time location,
 and return the time offset between the time request and the actual location of the first
 returned datagram. Irrespective of the value of timeSpanInSamples, at least
 one datagram is always returned.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>targetTimeInSamples</CODE> - the requested position, in samples. Must be non-negative and
 less than the total duration of the timeline.<DD><CODE>timeSpanInSamples</CODE> - the requested time span, in samples. If positive, then datagrams are selected by the given time span.<DD><CODE>reqSampleRate</CODE> - the sample rate for the requested and returned times. Must be positive.<DD><CODE>returnOffset</CODE> - an optional output field. 
 If it is not null, then after the call it must have length of at least 1, 
 and the first array field will contain the time difference, in samples, between the time request
 and the actual beginning of the first datagram.
<DT><B>Returns:</B><DD>an array of datagrams containing at least one datagram. If less than the requested amount of datagrams
 can be read, the number of datagrams that can be read is returned.
<DT><B>Throws:</B>
<DD><CODE>java.lang.IllegalArgumentException</CODE> - if targetTimeInSamples is negative, or if a returnOffset of length 0 is given.
<DD><CODE>IOException,</CODE> - BufferUnderflowException if no data can be read at the given target time
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getDatagrams(long, long, int)"><!-- --></A><H3>
getDatagrams</H3>
<PRE>
public <A HREF="../../../marytts/unitselection/data/Datagram.html" title="class in marytts.unitselection.data">Datagram</A>[] <B>getDatagrams</B>(long&nbsp;targetTimeInSamples,
                               long&nbsp;timeSpanInSamples,
                               int&nbsp;reqSampleRate)
                        throws java.io.IOException</PRE>
<DL>
<DD>Get the datagrams spanning a particular time range from a particular time location.
 Irrespective of the value of timeSpanInSamples, at least
 one datagram is always returned.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>targetTimeInSamples</CODE> - the requested position, in samples. Must be non-negative and
 less than the total duration of the timeline.<DD><CODE>timeSpanInSamples</CODE> - the requested time span, in samples. If positive, then datagrams are selected by the given time span.<DD><CODE>reqSampleRate</CODE> - the sample rate for the requested and returned times. Must be positive.
<DT><B>Returns:</B><DD>an array of datagrams containing at least one datagram. If less than the requested amount of datagrams
 can be read, the number of datagrams that can be read is returned.
<DT><B>Throws:</B>
<DD><CODE>java.lang.IllegalArgumentException</CODE> - if targetTimeInSamples is negative, or if a returnOffset of length 0 is given.
<DD><CODE>java.io.IOException</CODE> - if no data can be read at the given target time</DL>
</DD>
</DL>
<HR>

<A NAME="getDatagrams(long, long)"><!-- --></A><H3>
getDatagrams</H3>
<PRE>
public <A HREF="../../../marytts/unitselection/data/Datagram.html" title="class in marytts.unitselection.data">Datagram</A>[] <B>getDatagrams</B>(long&nbsp;targetTimeInSamples,
                               long&nbsp;timeSpanInSamples)
                        throws java.io.IOException</PRE>
<DL>
<DD>Get a given number of datagrams from a particular time location.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>targetTimeInSamples</CODE> - the requested position, in samples. Must be non-negative and
 less than the total duration of the timeline.<DD><CODE>number</CODE> - the number of datagrams to read. Even if this is <= 0, at least one datagram is always returned.<DD><CODE>reqSampleRate</CODE> - the sample rate for the requested and returned times. Must be positive.
<DT><B>Returns:</B><DD>an array of datagrams containing at least one datagram. If less than the requested amount of datagrams
 can be read, the number of datagrams that can be read is returned.
<DT><B>Throws:</B>
<DD><CODE>java.lang.IllegalArgumentException</CODE> - if targetTimeInSamples is negative, or if a returnOffset of length 0 is given.
<DD><CODE>java.io.IOException</CODE> - if no data can be read at the given target time</DL>
</DD>
</DL>
<HR>

<A NAME="getDatagrams(long, int, int, long[])"><!-- --></A><H3>
getDatagrams</H3>
<PRE>
public <A HREF="../../../marytts/unitselection/data/Datagram.html" title="class in marytts.unitselection.data">Datagram</A>[] <B>getDatagrams</B>(long&nbsp;targetTimeInSamples,
                               int&nbsp;number,
                               int&nbsp;reqSampleRate,
                               long[]&nbsp;returnOffset)
                        throws java.io.IOException</PRE>
<DL>
<DD>Get a given number of datagrams from a particular time location,
 and return the time offset between the time request and the actual location of the first
 returned datagram.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>targetTimeInSamples</CODE> - the requested position, in samples. Must be non-negative and
 less than the total duration of the timeline.<DD><CODE>number</CODE> - the number of datagrams to read. Even if this is <= 0, at least one datagram is always returned.<DD><CODE>reqSampleRate</CODE> - the sample rate for the requested and returned times. Must be positive.<DD><CODE>returnOffset</CODE> - an optional output field. 
 If it is not null, then after the call it must have length of at least 1, 
 and the first array field will contain the time difference, in samples, between the time request
 and the actual beginning of the first datagram.
<DT><B>Returns:</B><DD>an array of datagrams containing at least one datagram. If less than the requested amount of datagrams
 can be read, the number of datagrams that can be read is returned.
<DT><B>Throws:</B>
<DD><CODE>java.lang.IllegalArgumentException</CODE> - if targetTimeInSamples is negative, or if a returnOffset of length 0 is given.
<DD><CODE>java.io.IOException</CODE> - if no data can be read at the given target time</DL>
</DD>
</DL>
<HR>

<A NAME="getDatagrams(marytts.unitselection.data.Unit, int, long[])"><!-- --></A><H3>
getDatagrams</H3>
<PRE>
public <A HREF="../../../marytts/unitselection/data/Datagram.html" title="class in marytts.unitselection.data">Datagram</A>[] <B>getDatagrams</B>(<A HREF="../../../marytts/unitselection/data/Unit.html" title="class in marytts.unitselection.data">Unit</A>&nbsp;unit,
                               int&nbsp;reqSampleRate,
                               long[]&nbsp;returnOffset)
                        throws java.io.IOException</PRE>
<DL>
<DD>Get the datagrams spanning a particular unit,
 and return the time offset between the unit request and the actual location of the first
 returned datagram. Irrespective of the unit duration, at least
 one datagram is always returned.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>unit</CODE> - The requested speech unit, containing its own position and duration.<DD><CODE>reqSampleRate</CODE> - the sample rate for the requested and returned times. Must be positive.<DD><CODE>returnOffset</CODE> - an optional output field. 
 If it is not null, then after the call it must have length of at least 1, 
 and the first array field will contain the time difference, in samples, between the time request
 and the actual beginning of the first datagram.
<DT><B>Returns:</B><DD>an array of datagrams containing at least one datagram. If less than the requested amount of datagrams
 can be read, the number of datagrams that can be read is returned.
<DT><B>Throws:</B>
<DD><CODE>java.lang.IllegalArgumentException</CODE> - if targetTimeInSamples is negative, or if a returnOffset of length 0 is given.
<DD><CODE>java.io.IOException</CODE> - if no data can be read at the given target time</DL>
</DD>
</DL>
<HR>

<A NAME="getDatagrams(marytts.unitselection.data.Unit, int)"><!-- --></A><H3>
getDatagrams</H3>
<PRE>
public <A HREF="../../../marytts/unitselection/data/Datagram.html" title="class in marytts.unitselection.data">Datagram</A>[] <B>getDatagrams</B>(<A HREF="../../../marytts/unitselection/data/Unit.html" title="class in marytts.unitselection.data">Unit</A>&nbsp;unit,
                               int&nbsp;reqSampleRate)
                        throws java.io.IOException</PRE>
<DL>
<DD>Get the datagrams spanning a particular unit. Irrespective of the unit duration, at least
 one datagram is always returned.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>unit</CODE> - The requested speech unit, containing its own position and duration.<DD><CODE>reqSampleRate</CODE> - the sample rate for the requested and returned times. Must be positive.
<DT><B>Returns:</B><DD>an array of datagrams containing at least one datagram. If less than the requested amount of datagrams
 can be read, the number of datagrams that can be read is returned.
<DT><B>Throws:</B>
<DD><CODE>java.lang.IllegalArgumentException</CODE> - if targetTimeInSamples is negative, or if a returnOffset of length 0 is given.
<DD><CODE>java.io.IOException</CODE> - if no data can be read at the given target time</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/TimelineReader.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../marytts/unitselection/data/SyllableIterator.html" title="class in marytts.unitselection.data"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../marytts/unitselection/data/TimelineReader.IdxField.html" title="class in marytts.unitselection.data"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?marytts/unitselection/data/TimelineReader.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="TimelineReader.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
